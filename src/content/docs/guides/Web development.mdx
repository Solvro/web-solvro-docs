---
title: Handbook Web Developera
description: Poradnik w Å›wiecie web developmentu, jak zaczÄ…Ä‡ iÂ Å¼yÄ‡?
---
import { Tabs, TabItem, Steps, FileTree } from '@astrojs/starlight/components';

## Åšrodowisko

### WSL

Za uÅ¼ywanie Windowsa do programowania jest wyrzucenie z koÅ‚a, kaÅ¼dy obowiÄ…zkowo ma uÅ¼ywaÄ‡Â co najmniej WSLâ€™a, a zalecany jest dual boot do Linuxa (rekomenduje ubuntu, bo proste)

- Tutorial dla opornych
  [https://www.youtube.com/watch?v=-atblwgc63E](https://www.youtube.com/watch?v=-atblwgc63E)

### Edytor

UÅ¼ywajcie VSCode, inne edytory na wÅ‚asnÄ…Â odpowiedzialnoÅ›Ä‡

OBOWIÄ„ZKOWE wtyczki:

- [Prettier](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode) - musicie go skonfigurowaÄ‡ do formatowania przy zapisie i jako domyÅ›lny formater
  [https://www.youtube.com/watch?v=drtxWx1XojI](https://www.youtube.com/watch?v=drtxWx1XojI)
- [Eslint](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint) - bÄ™dzie krzyczaÅ‚ na was jak coÅ›Â Åºle zrobicie, tutaj wystarczy tylko kliknÄ…Ä‡ install

Polecane wtyczki:

- Tailwind CSS IntelliSense - podpowiedzi gdy piszecie klasy w tailwind, must have
- Better Comments - Å‚adne komentarze
- Error Lens - od razu wam pokaÅ¼e bÅ‚Ä™dy, nie trzeba myszkÄ… najeÅ¼dÅ¼aÄ‡
- Github Copilot - no chyba wiecie
- GitLens - Å‚adny git blame w vscode

## Struktura plikÃ³w

UÅ¼ywamy tej z [bulletproof-react](https://github.com/alan2207/bulletproof-react/blob/master/docs/project-structure.md), ale lekko przerobionej pod nasze potrzeby. Na start aplikacji polecam pominÄ…Ä‡ folder `features` i wszystko robiÄ‡ toplevel i dopiero pÃ³Åºniej podzieliÄ‡ na featury.

<FileTree>

- next.config.ts
- tailwind.config.ts
- package.json
- src
  - app # tutaj sÄ… nasze wszystkie strony
    - layout.tsx
    - page.tsx
    - blog
      - [slug]
        - page.tsx
    - kontakt
      - page.tsx
  - assets # zdjÄ™cia, czcionki i inne rzeczy
    - fajne_foto.webp
  - components # komponenty uÅ¼ywane w caÅ‚ej aplikacji
    - FirstComponent.tsx
    - SecondComponent.tsx
  - features/ # moduÅ‚y podzielone na feature'y
  - hooks # hooki uÅ¼ywane w caÅ‚ej aplikacji
    - useAuth.tsx
    - usePlan.tsx
  - test/ # utilites do testÃ³w + mocki
  - types/ # typy uÅ¼ywane w caÅ‚ej aplikacji
  - utils # funkcje uÅ¼ywane w caÅ‚ej aplikacji
    - db.ts
    - lib.ts

</FileTree>

KaÅ¼dy feature ma takÄ…Â strukturÄ™:

<FileTree>

- src/features/awesome-feature
  - api/ # exported API request declarations and api hooks related to a specific feature
  - assets/ # static files
  - components/ # components scoped to a specific feature
  - hooks/ # hooks scoped to a specific feature
  - atoms/ # atomy uÅ¼ywane w konkretnym featuerze
  - types/ # typescript types used within the feature
  - utils/ # utility functions for a specific feature

</FileTree>

## Assumptions

Wszystko w programowaniu ma swoje mocne i sÅ‚aby strony i wszystko zaleÅ¼y od tego co chcemy osiÄ…gnÄ…Ä‡, ten poradnik jest zoptymalizowany pod (w kolejnoÅ›ci od najwaÅ¼niejszego):

1. SzybkoÅ›Ä‡ developmentu - pisanie kodu powinno byÄ‡ jak najprostsze i jak najszybsze, jesteÅ›my koÅ‚em naukowym, kaÅ¼dy robi tutaj po godzinach i nie mamy budÅ¼etu na marnowanie czasu na zbÄ™dne rzeczy
2. NowoczesnoÅ›Ä‡ - jak juÅ¼ robimy coÅ› za darmo, to miejmy z tego frajde, nie wiem jak wy, ja bym nie chciaÅ‚ pisaÄ‡ w angularze ğŸ˜­
3. UniwersalnoÅ›Ä‡ - nie ma tutaj specjalistycznych rzeczy, staraÅ‚em siÄ™, Å¼eby jak najbardziej daÅ‚o siÄ™Â przenosiÄ‡ wiedzÄ™ miÄ™dzy apkami

Pod co nie jest zrobiony ten guide:

1. DÅ‚ugowiecznoÅ›Ä‡ - wiÄ™kszoÅ›Ä‡ bibliotek tutaj uÅ¼ywanych potrafi bardzo szybko siÄ™Â zmieniaÄ‡ (patrz nextjs) i projekty, ktÃ³re nie bÄ™dÄ™Â dotykane przez rok bÄ™dzie moÅ¼na juÅ¼ nazywaÄ‡ legacy, aka [staÅ‚ocieplny software](https://blog.jim-nielsen.com/2024/cold-blooded-software/)
2. Learning curve - technologie takie jak React, NextJS sÄ… stosunkowo trudne do nauczania siÄ™Â dla osoby, ktÃ³ra nic nie wie, tutaj o wiele lepiej by siÄ™Â sprawdziÅ‚ czysty html i js

## Technologie

### Typescript

Nie widzÄ™ powodÃ³w, Å¼eby nie uÅ¼ywaÄ‡ Typescripta:

- Ma niski prÃ³g wejÅ›cia
- OLBRZYMIA wartoÅ›Ä‡ dla programisty
- UÅ¼ywany przez pÃ³Å‚ Å›wiata

### shadcn/ui

Komponenty, ktÃ³re z miejsca sÄ… Å‚adne, customizowalne i na dodatek multum ludzi ich uÅ¼ywa.

### React

Najpopularniejsza obecnie biblioteka (ktÃ³ra dziaÅ‚a jak framework) do tworzenia UI, klasyczek.

### Reszta:

- NextJS

- React Hook Form

- shadcn/ui

- Tanstack Query

- Jotai

- TailwindCSS

## Accessibility

### Opisy obrazkÃ³w

DobrÄ… praktykÄ… jest umieszczanie krÃ³tkiego opisu obrazka poza samym src obrazka. SÅ‚uÅ¼y to czytnikom ekranÃ³w, wspiera SEO oraz jest wyÅ›wietlany w przypadku, gdy zdjÄ™cie nie moÅ¼e siÄ™ zaÅ‚adowaÄ‡.

#### Podstawowe zasady:

- **ZwiÄ™zÅ‚oÅ›Ä‡ i celnoÅ›Ä‡** â€“ Opis powinien byÄ‡ krÃ³tki i oddawaÄ‡ cel obrazu. Unikaj zbÄ™dnych szczegÃ³Å‚Ã³w, chyba Å¼e sÄ… kluczowe do zrozumienia treÅ›ci obrazu.
- **Kontekst obrazu** â€“ Skup siÄ™ na tym, co obraz wnosi do strony. Na przykÅ‚ad, jeÅ›li zdjÄ™cie przedstawia osobÄ™ szczÄ™Å›liwÄ…, waÅ¼ne moÅ¼e byÄ‡ opisanie jej emocji.
- **Unikaj zwrotÃ³w â€obrazek przedstawiaâ€** â€“ Czytniki ekranowe automatycznie rozpoznajÄ… obraz, wiÄ™c wystarczy przejÅ›Ä‡ od razu do treÅ›ci opisu.
- **Unikaj powtarzania tekstu z otoczenia obrazu** â€“ JeÅ›li tekst obok obrazu juÅ¼ wyjaÅ›nia jego znaczenie, opis alt moÅ¼e byÄ‡ bardziej ogÃ³lny lub pominiÄ™ty.

#### Kiedy stosowaÄ‡ alt-a:

- **Obrazy informacyjne**: Opisz, co jest kluczowe, np. â€Wykres sÅ‚upkowy przedstawiajÄ…cy roczny wzrost sprzedaÅ¼y o 20%â€ zamiast â€Wykres sÅ‚upkowyâ€.
- **Logo firmy**: Opis moÅ¼e byÄ‡ prosty, np. â€Logo firmy Contosoâ€, ale jeÅ›li logo jest linkiem, warto dodaÄ‡ â€Logo Contoso â€“ strona gÅ‚Ã³wnaâ€.
- **Infografiki**: Oddaj istotÄ™ przekazywanych danych, np. â€Infografika prezentujÄ…ca korzyÅ›ci z recyklingu: zmniejszenie odpadÃ³w o 50%â€.

#### Kiedy nie stosowaÄ‡:

- **Obrazy dekoracyjne**: JeÅ›li obraz nie wnosi Å¼adnej wartoÅ›ci informacyjnej (ramki czy jakiÅ› gwiazdki pÅ‚ywajÄ…ce po stronie), oznacz go jako dekoracyjny (np. alt="").
- **Ikony z tekstem obok**: JeÅ›li ikona ma objaÅ›niajÄ…cy tekst tuÅ¼ obok, alt text nie jest konieczny.

#### Tego nie rÃ³b:

- Nie uÅ¼ywaj nazw plikÃ³w jako alt textu.
- Nie stosuj losowych ciÄ…gÃ³w znakÃ³w lub ogÃ³lnikÃ³w, takich jak â€ZdjÄ™cieâ€ czy â€xxxâ€.
- Nie kopiuj caÅ‚ego tekstu z obrazu i wszystkich najmniejszych szczegÃ³Å‚Ã³w, jeÅ›li nie jest to kluczowe do zrozumienia treÅ›ci.

PrzykÅ‚ad:
```jsx {8}
// app/page.tsx
import Image from 'next/image'

export function MyComponent() {
  return (
    <Image
      src="/next.svg"
      alt="Next.js logo" // KrÃ³tki opis grafiki
    />
  )
}
```

### Przyciski jako linki

Za wsadzanie linka w przycisk bÄ™dÄ™ karaÅ‚ tygodniowÄ… chÅ‚ostÄ…, to nie jest poprawny html, sam react krzyczy, Å¼e nie moÅ¼na tak robiÄ‡ i czytniki ekranÃ³w siÄ™ popierdolÄ… jak sprÃ³bujÄ… to przeczytaÄ‡

Jak zrobiÄ‡ Link, ktÃ³ry wyglÄ…da jak przycisk: 
```jsx
// app/page.tsx
import Link from "next/link"
import { Button } from "@/components/ui/button"
 
export function ButtonAsChild() {
  return (
    <Button asChild>
      <Link href="/login">Login</Link>
    </Button>
  )
}
```

:::tip
JeÅ›li ktoÅ› pragnie doedukowaÄ‡ siÄ™ bardziej szczegÃ³Å‚owo w temacie "Accessibility" zachÄ™cam do obczajenia [dokumentacji React'a](https://legacy.reactjs.org/docs/accessibility.html), ale to tylko dla zaprawionych w boju w ramach ciekawostki.
:::

## Best practices

### Jak zrobiÄ‡Â Å‚adne UI?

Wbrew przekonaniom, sprawa jest prosta:

1. ZnajdÅºÂ stronÄ™, ktÃ³rej design Ci siÄ™ podoba i pasuje do Twojego projektu, np. robisz apke z mapÄ…? google maps
2. Skopiuj design 1:1, uproÅ›Ä‡ i przerÃ³b go na komponenty shadcn
3. Gotowe, ciesz siÄ™Â Å‚adnym designem

W UI/UX nie ma miejsca na kreatywnoÅ›Ä‡ i jeÅ›li sami sprÃ³bujecie stworzyÄ‡ wÅ‚asny design na 99% skoÅ„czycie z czymÅ› dziwnym czego uÅ¼ytkownicy nie chcÄ… uÅ¼ywaÄ‡. Jak tylko moÅ¼ecie kradnijcie designy i dostosowujcie do swoich potrzeb, uÅ¼ytkownicy chcÄ… uÅ¼ywaÄ‡ stron, ktÃ³re juÅ¼ znajÄ… i nie da sieÂ sprawiÄ‡ by nie znali waszej stronÄ™Â jeÅ›li wyglÄ…da tak samo jak instagram ğŸ˜­

Poza tym, nie pisz wÅ‚asnych komponentÃ³w jeÅ›li nie masz BARDZO dobrego powodu, te z shadcnâ€™a sÄ…Â bardzo Å‚adne i jak tylko moÅ¼esz uÅ¼ywaj ich 1:1, wtedy na pewno nie zbÅ‚Ä…dzisz.

- Jak chcesz wiedzieÄ‡Â wiÄ™cej na ten temat zapraszam do poczytania Refactoring UI, ksiÄ…Å¼ka twÃ³rcÃ³w tailwinda, poradnik o designie dla programistÃ³w (wymagany dostÄ™p do dysku)
  [https://drive.google.com/file/d/1zbsgxcK-xREkmFV7D6Z1lHZwOn4k04w-/view?usp=drive_link](https://drive.google.com/file/d/1zbsgxcK-xREkmFV7D6Z1lHZwOn4k04w-/view?usp=drive_link)

### Pobieranie danych z API

Tutaj mamy dwie Å›cieÅ¼ki:

1. React Server Components

   React Server Components (RSC) to domyÅ›lne podejÅ›cie w Next.js 14+. DziÄ™ki nim dane sÄ… pobierane po stronie serwera, co eliminuje koniecznoÅ›Ä‡ zarzÄ…dzania stanami Å‚adowania i zapewnia szybsze Å‚adowanie stron. Zaletami jest automatyczne renderowanie danych na serwerze, brak koniecznoÅ›ci zarzÄ…dzania stanami Å‚adowania i sÄ… proste w uÅ¼yciu.

    ```jsx {5-6}
    // app/products/page.tsx

    export default async function ProductsPage() {
      // Pobieranie danych z API po stronie serwera
      const data = await fetch('https://api.example.com/data');
      const products = await data.json();

      return (
        <div>
          <h1>Produkty</h1>
          <ul>
            {products.map((product) => (
              <li key={product.id}>
                {product.name} - {product.price} PLN
              </li>
            ))}
          </ul>
        </div>
      );
    }
    ```

2. Tanstack Query

   Tego uÅ¼ywamy gdy chcemy mieÄ‡ wiÄ™kszÄ… kontrolÄ™ nad tym co siÄ™Â dzieje w naszej aplikacji, potrzebujemy odÅ›wieÅ¼aÄ‡Â czÄ™sto dane albo na przykÅ‚ad mamy jakÄ…Å› skomplikowanÄ… logikÄ™ po stronie klienta (typu uÅ¼ytkownik najpierw wybiera jakÄ…Å› zakÅ‚adkÄ™ i dopiero wtedy pobieramy coÅ›Â z api albo jakikolwiek case z bardziej zaawansowanym filtrowaniem)

    <Tabs>
      <TabItem label="ZewnÄ™trzne API">
        ```jsx {2, 10-12}
        // app/products/page.tsx
        "use client"

        import { useQuery } from '@tanstack/react-query';

        export default function ProductsList() {
          const { data: products, isLoading, error, refetch } = useQuery({
            queryKey: ['products'],
            queryFn: async () => {
              const data = await fetch('https://api.example.com/data');
              const products = await data.json();
              return products
            },
          })

          if (isLoading) return <p>Åadowanie danych...</p>;
          if (error) return <p>WystÄ…piÅ‚ bÅ‚Ä…d podczas pobierania danych.</p>;

          return (
            <ul>
              {products.map((product) => (
                <li key={product.id}>
                  {product.name} - {product.price} PLN
                </li>
              ))}
            </ul>
          );
        }
        ```
      </TabItem>
      <TabItem label="Server Actions (NextJS)">
        ```ts {2, 11}
        // actions/products.ts
        "use server"

        import { db } from '@/lib/db';
        /** 
        * PAMIÄ˜TAJCIE, Å¼e tego typu akcje serwerowe sÄ… automatycznie generowanymi
        * endpointami API, wiÄ™c kaÅ¼dy moÅ¼e przy odrobinie umiejÄ™tnoÅ›ci wykonaÄ‡ swoje rzÄ…danie do tej funkcji.
        * Trzeba zawsze zabezpieczyÄ‡ takÄ… funkcjÄ™, jeÅ›li robimy rzeczy tylko dla zalogowanych uÅ¼ytkownikÃ³w, np zmiana nazwy.
        */
        export async function fetchProducts() {
          return await db.products.findMany(); // PrzykÅ‚ad z bazÄ… danych
        }
        ```

        ```jsx {2, 10}
        // app/products/page.tsx
        "use client"

        import { useQuery } from '@tanstack/react-query';
        import { fetchProducts } from '@/actions/products.ts';

        export default function ProductsList() {
          const { data: products, isLoading, error, refetch } = useQuery({
            queryKey: ['products'],
            queryFn: fetchProducts,
          })

          if (isLoading) return <p>Åadowanie danych...</p>;
          if (error) return <p>WystÄ…piÅ‚ bÅ‚Ä…d podczas pobierania danych.</p>;

          return (
            <ul>
              {products.map((product) => (
                <li key={product.id}>
                  {product.name} - {product.price} PLN
                </li>
              ))}
            </ul>
          );
        }
        ```
      </TabItem>
    </Tabs>

    


Do pobierania danych teÅ¼ potrzeba klienta API i tutaj mam zachÄ™cam do korzystania z natywnego `fetch` , a za uÅ¼ywanie `axios`a bez powodu bÄ™dÄ™ ucinaÅ‚ pensje, jest bardzo maÅ‚o powodÃ³w do uÅ¼ywania axiosa w 2024 roku.

### WysyÅ‚anie danych do API

Tutaj jestem opinionated i wedÅ‚ug mnie jedynym sÅ‚usznym wyborem jest Tanstack Query i jego mutacje, nie prÃ³bujcie tego robiÄ‡ inaczej, bo bÄ™dziecie sobie pluÄ‡ w brodÄ™ (albo ja wam)

### ZarzÄ…dzanie stanem

Do globalnego stanu uÅ¼ywamy [Jotai](https://jotai.org/), a do lokalnego useState/useReducer jak serio to jest coÅ›Â skomplikowanego

Nigdy Context API, chyba, Å¼e macie BARDZO dobry powÃ³d

### Formularze

Zapraszam do dokumentacji shadcnâ€™a, tam wiÄ™kszoÅ›Ä‡ jest dobrze opisana:

[https://ui.shadcn.com/docs/components/form](https://ui.shadcn.com/docs/components/form)

### Autentykacja

Nie mieliÅ›my jeszcze za duÅ¼o projektÃ³w, ktÃ³re by wymagaÅ‚y autentykacji, ale tutaj raczej zalecam iÅ›Ä‡ w klasykÄ™ i klepnÄ…Ä‡ to w [AuthJS](https://authjs.dev/). Jest to rozwijany od lat produkt, ktÃ³ry moÅ¼na 
w Å‚atwy sposÃ³b zintegrowaÄ‡ z projektem w NextJS. Zawiera duÅ¼y funkcji, takich jak logowanie OAuth2 czy magicznymi linkami, sesje bazujÄ…ce na bazie danych lub tokenach JWT czy automatycznÄ… ochronÄ™ przed CSRF.
Ma dobrze rozwiniÄ™tÄ… spoÅ‚ecznoÅ›Ä‡ i dokumentacjÄ™ oraz masÄ™ tutoriali na YouTubie.

Dodatkowo w ramach ciekawostki podrzucam Wam projekt dziaÅ‚ajÄ…cy pod nazwÄ… [BetterAuth](https://www.better-auth.com/). 
Jest to stosunkowo nowy projekt, ktÃ³ry w wersjÄ™ stabilnÄ… wszedÅ‚ w listopadzie 2024 roku, aczkolwiek jest dobrze przemyÅ›lany i aktywnie rozwijany.
Zalety tego projektu to miÄ™dzy innymi, jeszcze Å‚atwiejsza instalacja niÅ¼ AuthJS czy rozwiÄ…zanie pluginowe, np. jeÅ›li potrzebujecie uÅ¼yÄ‡ Passkeys to dodajecie taki plugin do configu.
Do tego bardzo prosta dokumentacja. Polecam siÄ™ zabawiÄ‡.

JeÅ›li robicie to DIY, to pewnie bÄ™dziecie musieli sobie odpowiedzieÄ‡ na pytanie gdzie trzymaÄ‡ tokeny i tutaj sÄ… dwie opcje:

- LocalStorage - protsza opcja, ale mniej bezpieczna i bardziej podatna na ataki XSS
- Cookies HttpOnly - bardziej bezpieczna opcja, ale trudniejsza w implementacji, Åºle zaimplementowane moÅ¼e prowadziÄ‡ do atakÃ³w CSRF

Na potrzeby Solvro cokolwiek wybierzecie bÄ™dzie dobrze, a jeÅ›li kogoÅ› temat bardziej interesuje to tutaj moÅ¼na sobie poczytaÄ‡:

- https://tkacz.pro/how-to-securely-store-jwt-tokens
- https://stackoverflow.com/questions/27067251/where-to-store-jwt-in-browser-how-to-protect-against-csrf

### Landing page

JeÅ›li jeszcze raz ktoÅ›Â zmarnuje czas na robienie wÅ‚asnego landing pageâ€™a to go uduszÄ™, tutaj macie dwie templatki i proszÄ™ z nich zrzynaÄ‡:

- [https://shadcn-landing-page.vercel.app](https://shadcn-landing-page.vercel.app/)
- [https://shadcn-landing-page-livid.vercel.app](https://shadcn-landing-page-livid.vercel.app/)

### Analityka

Do analityki mamy postawione [Umami](https://umami.is/) na [https://analytics.solvro.pl](https://analytics.solvro.pl), jak chcecie dostÄ™p to uderzajcie do ZarzÄ…du.

### WYSIWYG

Strasznie nie lubiÄ™Â tego tematu, bo tu jest milion wyborÃ³w i milion + 1 zÅ‚ych, obecnie rekomenduje:

[https://shadcn-minimal-tiptap.vercel.app/](https://shadcn-minimal-tiptap.vercel.app/)

### Tabelki

Do tworzenia bardziej zaawansowanych tabelek polecam [https://tanstack.com/table/latest](https://tanstack.com/table/latest). Jest doÅ›Ä‡ skomplikowany i ma wysoki prÃ³g wejÅ›cia, ale pozwoli wam na wszystko co sobie wymyÅ›licie.

Jako przykÅ‚ad polecam DataTable z shadcn'a:
[https://ui.shadcn.com/docs/components/data-table](https://ui.shadcn.com/docs/components/data-table)

JeÅ›li tabelka ma wiÄ™cej niÅ¼ 1000 wierszy to jest moment, Å¼eby przenieÅ›Ä‡ logikÄ™ filtrowania, paginacji i sortowania na backend, frontend przy takich iloÅ›ciach powoli moÅ¼e zaczÄ…Ä‡Â zamulaÄ‡. Przy 10k+ iloÅ›ci wierszy to jest must-have.

### Deployment

Tutaj zapraszam do korzystania z naszego coolifyâ€™a pod adresem [https://devops.solvro.pl/](https://devops.solvro.pl/), jak ktoÅ› chce dostÄ™py to pisaÄ‡ do ZarzÄ…du, raczej kaÅ¼dy dostaje ğŸ˜­

### a11y

Za wsadzanie linka w przycisk bÄ™dÄ™Â karaÅ‚ tygodniowÄ… chÅ‚ostÄ…, to nie jest poprawny html, sam react krzyczy, Å¼e nie moÅ¼na tak robiÄ‡ i czytniki ekranÃ³w siÄ™Â popierdolÄ… jak sprÃ³bujÄ… to przeczytaÄ‡

Jak zrobiÄ‡ Link, ktÃ³ry wyglÄ…da jak przycisk: [https://ui.shadcn.com/docs/components/button#as-child](https://ui.shadcn.com/docs/components/button#as-child)

## Daty

Uff, to jest ciÄ™Å¼ki temat. KaÅ¼dy kiedyÅ› zetknie siÄ™ z datami (lub juÅ¼ siÄ™ zetknÄ…Å‚) i bez odpowiednich narzÄ™dzi potrafi to byÄ‡ czasem droga przez mÄ™kÄ™. Te wszystkie strefy czasowe, wyÅ›wietlanie w rÃ³Å¼nych formatach, porÃ³wnywanie itd. 

Nasz naczelny Å»elownik BartuÅ› podrzuciÅ‚ libkÄ™ o nazwie **date-fns**. Popieram go caÅ‚ym serduszkiem i dziÄ™ki niej mam nadziÄ™jÄ™ sprawiÄ™, Å¼e to daty bÄ™dÄ… baÅ‚y siÄ™ Was a nie na odwrÃ³t.

:::tip
JeÅ›li szukasz jakie literki wykorzystaÄ‡ do osiÄ…gniÄ™cia zamierzonego efektu w formatowaniu, zapraszam do rozdziaÅ‚u niÅ¼ej pt. "Dziwne literki do formatowania"
:::

### Basic usage

<Steps>

1. Dodaj libke

   ```sh
   npm i date-fns
   ```

2. Zaimportuj funkcjÄ™ `format` z libki:

   ```jsx
   import { format } from 'date-fns';
   ```

3. UÅ¼ywaj jako `format(data, formater)`.

</Steps>

### Formatowanie daty

UÅ¼ycie funkcji `format` do sformatowania daty w czytelny sposÃ³b.

```jsx
import { format } from 'date-fns';

export default function HomePage() {
  const today = new Date(); // 27 listopada 2024
  const formattedDate = format(today, 'dd/MM/yyyy'); // np. 27/11/2024

  return (
    <h1>Dzisiejsza data: {formattedDate}</h1>
  );
}
```

### Dodawanie dni do daty

UÅ¼ycie funkcji `addDays`, aby obliczyÄ‡ przyszÅ‚e daty.

```jsx
import { addDays, format } from 'date-fns';

export default function HomePage() {
  const today = new Date(); // 27 listopada 2024
  const futureDate = addDays(today, 7); // Data za 7 dni
  const formattedFutureDate = format(futureDate, 'dd MMMM yyyy'); // np. 04 grudnia 2024

  return (
    <h1>Data za tydzieÅ„: {formattedFutureDate}</h1>
  );
}
```

### PorÃ³wnywanie dat

Sprawdzanie, czy jedna data jest przed lub po innej.

```jsx
import { isBefore, isAfter } from 'date-fns';

export default function HomePage() {
  const today = new Date(); // 27 listopada 2024
  const eventDate = new Date(2024, 11, 31); // 31 grudnia 2024

  const isEventInFuture = isAfter(eventDate, today);

  return (
    <div>
      <h1>{isEventInFuture ? 'Wydarzenie jest w przyszÅ‚oÅ›ci!' : 'Wydarzenie juÅ¼ siÄ™ odbyÅ‚o.'}</h1>
    </div>
  );
}
```

### Lokalizacja dat

Formatowanie daty w jÄ™zyku np. Angielskim za pomocÄ… opcji `locale`.

```jsx
import { format } from 'date-fns';
import { en } from 'date-fns/locale';

export default function HomePage() {
  const today = new Date(); // 27 listopada 2024
  const formattedDate = format(today, 'EEEE, d MMMM yyyy', { locale: en }); // np. Å›roda, 27 listopada 2024

  return (
    <h1>Dzisiejsza data: {formattedDate}</h1>
  );
}
```

### Obliczanie rÃ³Å¼nicy miÄ™dzy datami

UÅ¼ycie `differenceInDays` do obliczenia liczby dni miÄ™dzy dwiema datami.

```jsx
import { differenceInDays } from 'date-fns';

export default function HomePage() {
  const today = new Date(); // 27 listopada 2024
  const newYear = new Date(2025, 0, 1); // 1 stycznia 2025

  const daysUntilNewYear = differenceInDays(newYear, today);

  return ( 
    <h1>Do Nowego Roku zostaÅ‚o: {daysUntilNewYear} dni</h1> 
  );
}
```

### WyÅ›wietlanie upÅ‚ywu czasu

WyÅ›wietlanie, ile czasu upÅ‚ynÄ™Å‚o od podanej daty za pomocÄ… `formatDistance`, np. `10 sekund temu`.

```jsx
import { formatDistance } from 'date-fns';
import { pl } from 'date-fns/locale';

export default function HomePage() {
  const eventDate = new Date(2024, 10, 1); // 1 listopada 2024
  const today = new Date();

  const timePassed = formatDistance(eventDate, today, { addSuffix: true, locale: pl });

  return (
    <h1>Wydarzenie miaÅ‚o miejsce {timePassed}.</h1>
  );
}
```

### Dziwne literki do formatowania

Do formatowania dat uÅ¼ywamy literek. KaÅ¼da znaczy co innego. WaÅ¼ne jest rÃ³wnieÅ¼, czy jest duÅ¼a czy maÅ‚a. Szybka Å›ciÄ…gawka z najpotrzebniejszymi robaczkami.

| Litera | Opis                                   | PrzykÅ‚ad (dla `2024-11-27 04:07:09`) |
|--------|----------------------------------------|--------------------------------------|
| **d**  | DzieÅ„ miesiÄ…ca (bez zera na poczÄ…tku) | `27`                                |
| **dd** | DzieÅ„ miesiÄ…ca (z zerem na poczÄ…tku)  | `27`                                |
| **E**  | SkrÃ³cony dzieÅ„ tygodnia               | `Wed`                               |
| **EEEE**| PeÅ‚na nazwa dnia tygodnia            | `Wednesday`                         |
| **M**  | MiesiÄ…c (bez zera na poczÄ…tku)        | `11`                                |
| **MM** | MiesiÄ…c (z zerem na poczÄ…tku)         | `11`                                |
| **MMM**| SkrÃ³cona nazwa miesiÄ…ca               | `Nov`                               |
| **MMMM**| PeÅ‚na nazwa miesiÄ…ca                 | `November`                          |
| **yy** | Ostatnie dwie cyfry roku              | `24`                                |
| **yyyy**| PeÅ‚ny rok                            | `2024`                              |
| **H**  | Godzina w formacie 24-godzinnym       | `14`                                |
| **HH** | Godzina w formacie 24-godzinnym (z zerem) | `14`                            |
| **h**  | Godzina w formacie 12-godzinnym       | `2`                                 |
| **hh** | Godzina w formacie 12-godzinnym (z zerem) | `02`                             |
| **a**  | AM/PM                                 | `PM`                                |
| **m**  | Minuty (bez zera na poczÄ…tku)         | `7`                                 |
| **mm** | Minuty (z zerem na poczÄ…tku)          | `07`                                |
| **s**  | Sekundy (bez zera na poczÄ…tku)        | `9`                                 |
| **ss** | Sekundy (z zerem na poczÄ…tku)         | `09`                                |
| **XXX**| Strefa czasowa z dwukropkiem          | `+01:00`                            |
| **x**  | Czas w milisekundach od UNIX Epoch    | `1732610829000`                     |

:::note
Do peÅ‚ej dokumentacji o formatowaniu i literkach mogÄ™ odesÅ‚aÄ‡ pod [tym linkiem](https://date-fns.org/v4.1.0/docs/format)
:::

Robaczki moÅ¼na dowolnie Å‚Ä…czyÄ‡. Kilka przykÅ‚adÃ³w:

```jsx
const date = new Date();
const formatted = format(date, 'EEEE, d MMMM yyyy', { locale: pl }); 
console.log(formatted); // Å›roda, 27 listopada 2024
```

```jsx
const formatted = format(new Date(), 'dd.MM.yyyy HH:mm:ss');
console.log(formatted); // 27.11.2024 14:07:09
```

```jsx
const formatted = format(new Date(), 'hh:mm a');
console.log(formatted); // 02:07 PM
```

## Strefy czasowe

Strefy czasowe to teÅ¼ spory temat, wiÄ™c postanowiÅ‚em zrobiÄ‡ dla nich osobny rodziaÅ‚. Aby uÅ¼ywaÄ‡ `date-fns` dla stref czasowych potrzebujemy specjalnego pakietu o nazwie `date-fns-tz`.

### Get started

<Steps>

1. Dodaj dodatkowy pakiet

   ```sh
   npm i date-fns date-fns-tz
   ```

</Steps>

### WyÅ›wietlanie daty w konkretnej strefie czasowej

UÅ¼yj funkcji `formatInTimeZone` z biblioteki `date-fns-tz`.

```jsx
import { formatInTimeZone } from 'date-fns-tz';

export default function HomePage() {
  const now = new Date();
  const timeZone = 'Europe/Warsaw';

  const formattedDate = formatInTimeZone(now, timeZone, 'yyyy-MM-dd HH:mm:ss XXX'); // Aktualny czas w Warszawie: 2024-11-27 14:30:00 +01:00

  return (
    <h1>Aktualny czas w Warszawie: {formattedDate}</h1>
  );
}
```

### PrzeksztaÅ‚cenie daty z jednej strefy czasowej na innÄ…

UÅ¼yj funkcji `utcToZonedTime` i `format` z `date-fns` oraz `date-fns-tz`.

```jsx
import { utcToZonedTime, format } from 'date-fns-tz';

export default function HomePage() {
  const utcDate = new Date('2024-11-27T12:00:00Z'); // Data w UTC
  const timeZone = 'America/New_York';

  // Konwersja na strefÄ™ czasowÄ…
  const zonedDate = utcToZonedTime(utcDate, timeZone);

  // Formatowanie daty w strefie czasowej
  const formattedDate = format(zonedDate, 'yyyy-MM-dd HH:mm:ss XXX', { timeZone }); // Czas w Nowym Jorku: 2024-11-27 07:00:00 -05:00

  return (
    <h1>Czas w Nowym Jorku: {formattedDate}</h1>
  );
}
```

### Obliczanie rÃ³Å¼nicy czasu miÄ™dzy strefami

MoÅ¼esz obliczyÄ‡ rÃ³Å¼nicÄ™ w godzinach miÄ™dzy dwiema strefami czasowymi, uÅ¼ywajÄ…c kombinacji `utcToZonedTime` i zwykÅ‚ego obliczenia rÃ³Å¼nicy dat.

```jsx
import { utcToZonedTime, differenceInHours } from 'date-fns-tz';

export default function HomePage() {
  const now = new Date();
  const timeZone1 = 'Europe/Warsaw';
  const timeZone2 = 'Asia/Tokyo';

  const timeInWarsaw = utcToZonedTime(now, timeZone1);
  const timeInTokyo = utcToZonedTime(now, timeZone2);

  const hourDifference = differenceInHours(timeInTokyo, timeInWarsaw); // RÃ³Å¼nica czasu miÄ™dzy WarszawÄ… a Tokio: 8 godzin

  return (
    <h1>RÃ³Å¼nica czasu miÄ™dzy WarszawÄ… a Tokio: {hourDifference} godzin</h1>
  );
}
```




## Checklista przed wypuszczeniem aplikacji

<Steps>

1. **Czy masz favicon:**
   
   W **Next.JS** wystarczy podmieniÄ‡ default plik `favicon.ico` na swÃ³j.

2. **Czy masz ustawiony title, description i inne metadata na kaÅ¼dej stronie?**

    SzczegÃ³Å‚owa dokumentacja Next.JS znajduje siÄ™ [tutaj](https://nextjs.org/docs/app/building-your-application/optimizing/metadata). Szybki przykÅ‚ad:

    ```jsx
    // app/layout.tsx
    export const metadata: Metadata = {
      title: 'TwÃ³j tytuÅ‚',
      description: 'I jakiÅ› fajny opis',
      keywords: [ 'Next.js', 'Tag 2', 'Tag 3' ],
      openGraph: {...},
    };
    ```

    :::caution
    Ustawianie metadaty moÅ¼na wykonaÄ‡ tylko w komponencie serwerowym, tj. nie w plikach z `"use client"`
    :::

3. **Czy masz wpiÄ™tÄ… analitykÄ™ i eventy?**

    KorzystajÄ…c z Umami lub innej analityki, dodajÄ…c jÄ… za pomocÄ… specjalnych bibliotek dostarczanych od danej analityki lub poprzez tag `<Script />` z `next/script`.

</Steps>

## CzÄ™ste bÅ‚Ä™dy

### UÅ¼ywanie useEffect tam gdzie nie trzeba

useEffect sÅ‚uÅ¼y do synchronizowania stanu z zewnÄ™trznym systemem (ref. dokumentacja reacta), jeÅ›li w useEffecie nie macie odwoÅ‚ania do zewnÄ™trznego systemu (localStorage, api serwera, inne api przeglÄ…darki) to znaczy, Å¼e go Åºle uÅ¼yliÅ›cie, przykÅ‚adowy zÅ‚y kod:

```jsx
function handleMuscleClick(muscle: string) {
  setSelectedMuscles((prevSelectedMuscles) => {
    if (prevSelectedMuscles.includes(muscle)) {
      return prevSelectedMuscles.filter((m) => m !== muscle);
    } else {
      return [...prevSelectedMuscles, muscle];
    }
  });
}

useEffect(() => {
  table.getColumn("targetMuscle")?.setFilterValue(selectedMuscles);
}, [selectedMuscles, table]);
```

Tutaj synchronizujemy `selectedMuscles` z filtrowana wartoÅ›cia z tabelce, tabelka Å¼yje w Å›wiecie reacta i nie jest zewnÄ™trznym systemem i rÃ³wnie dobrze moÅ¼emy to zrobiÄ‡ w ten sposÃ³b:

```jsx
function handleMuscleClick(muscle: string) {
  const newSelectedMuscles = selectedMuscles.includes(muscle)
    ? prevSelectedMuscles.filter((m) => m !== muscle)
    : [...prevSelectedMuscles, muscle];

  table.getColumn("targetMuscle")?.setFilterValue(newSelectedMuscles);
  setSelectedMuscles(newSelectedMuscles);
}
```

Teraz jest bardzo jasne, Å¼e po klikniÄ™ciu na miÄ™sieÅ„, zostaje teÅ¼ zupdateâ€™owana tabelka.

Ten przykÅ‚ad jeszcze nie jest taki zÅ‚y, przy 1 useEffectcie doÅ›Ä‡ Å‚atwo siÄ™Â poÅ‚apaÄ‡ co siÄ™ dzieje, przy 11 robi siÄ™Â juÅ¼ kÅ‚opot i raz u mnie w pracy przez coÅ›Â takiego padÅ‚a produkcja ğŸ˜­

### NieuÅ¼ywanie lub naduÅ¼ywanie `useMemo`

Hook `useMemo` pozwala na zapamiÄ™tanie wyniku funkcji obliczeniowej miÄ™dzy renderami komponentu, co moÅ¼e pomÃ³c w optymalizacji wydajnoÅ›ci aplikacji. Jest uÅ¼ywany gÅ‚Ã³wnie w przypadku "drogich" obliczeÅ„ (obliczenia, ktÃ³re swojÄ… zÅ‚oÅ¼onoÅ›ciÄ… majÄ… istotny wpÅ‚yw na wydajnoÅ›Ä‡), ktÃ³re nie muszÄ… byÄ‡ wykonywane na nowo przy kaÅ¼dym renderze.

SkÅ‚adnia:
```jsx
const memoizedValue = useMemo(() => computeValue(a, b), [a, b]);
```
- **computeValue**: Funkcja zwracajÄ…ca wynik obliczeÅ„.
- **[a, b]**: useMemo ponownie obliczy wartoÅ›Ä‡ tylko wtedy, gdy jedna z zaleÅ¼noÅ›ci w tej tablicy siÄ™ zmieni.

#### Kiedy uÅ¼ywaÄ‡ `useMemo`?

- Przy "kosztownych" obliczeniach, takich jak zÅ‚oÅ¼one przeksztaÅ‚cenia duÅ¼ych iloÅ›ci danych.
- Kiedy wynik obliczeÅ„ jest wielokrotnie uÅ¼ywany w danym renderze (np. w innych hookach).
- Przy obliczeniach, ktÃ³re zaleÅ¼Ä… od dynamicznie zmieniajÄ…cych siÄ™ danych.

#### Kiedy nie uÅ¼ywaÄ‡ `useMemo`?

- JeÅ›li obliczenia sÄ… szybkie i nie majÄ… zauwaÅ¼alnego wpÅ‚ywu na wydajnoÅ›Ä‡.
- Gdy dodanie useMemo bardziej komplikuje kod niÅ¼ przynosi korzyÅ›ci.
- Gdy zaleÅ¼noÅ›ci czÄ™sto siÄ™ zmieniajÄ…, co moÅ¼e prowadziÄ‡ do czÄ™stych ponownych obliczeÅ„.

:::tip
Nie naleÅ¼y go uÅ¼ywaÄ‡ na siÅ‚Ä™. Najpierw upewnij siÄ™, Å¼e istnieje faktyczny problem z wydajnoÅ›ciÄ…, zanim go zastosujesz.
:::

## FAQ

- Co to Server Components i po co ich uÅ¼ywaÄ‡?

  RSC (React Server Components) to komponenty, ktÃ³rych kodzik jest wykonywany WYÅÄ„CZNIE po stronie serwera i ani gram javascriptu nie idzie do przeglÄ…darki, to sÄ…Â obecnie domyÅ›lne komponenty w Nextjs 13-15. UÅ‚atwiajÄ…Â pobieranie danych z serwera, bo nie trzeba np. wyÅ›wietlaÄ‡ stanu loadingu, od razu otrzymujemy gotowe dane, moÅ¼emy wykonywaÄ‡ zapytania do bazki od razu w kodzie komponentu co jest mega wygodne. Minus taki, Å¼e nie moÅ¼ecie tutaj uÅ¼ywaÄ‡Â Å¼adnych hookÃ³w ani obsÅ‚ugiwaÄ‡Â eventÃ³w, do tego sÄ…Â potrzebne Client Components.
  tl;dr;
  Kiedy uÅ¼ywaÄ‡Â RSC?
  Zawsze
  Kiedy uÅ¼ywaÄ‡ Client Components?
  Wtedy kiedy nie moÅ¼ecie RSC (czyli potrzebujecie hookÃ³w itp)

  DogÅ‚ebniej opisane to jest tutaj: https://nextjs.org/docs/app/building-your-application/rendering/composition-patterns

- Jak dziaÅ‚ajaÂ Client Components?

  Wbrew intuicji poczÄ…tkujÄ…cych one sÄ… teÅ¼Â wykonywane po stronie serwera (https://github.com/reactwg/server-components/discussions/4) i serwer wysyÅ‚a gotowy html wraz z javascriptem, ktÃ³ry potem jest wykonywany po stronie klienta i nastÄ™puje proces hydracji, czyli React "przejmuje" html, ktÃ³ry dostaÅ‚ i sam zaczyna go obsÅ‚ugiwaÄ‡.

  Polecam bardzo opis z dokumentacji Nextjs, dobrze to opisali: https://nextjs.org/docs/app/building-your-application/rendering/client-components
