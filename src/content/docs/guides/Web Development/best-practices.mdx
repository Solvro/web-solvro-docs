---
title: Best practices
sidebar:
  order: 4
---
import { Tabs, TabItem } from '@astrojs/starlight/components';

## Jak zrobiadne UI?

Wbrew przekonaniom, sprawa jest prosta:

1. Znajd藕stron, kt贸rej design Ci si podoba i pasuje do Twojego projektu, np. robisz apke z map? google maps
2. Skopiuj design 1:1, upro i przer贸b go na komponenty shadcn
3. Gotowe, ciesz siadnym designem

W UI/UX nie ma miejsca na kreatywno i jeli sami spr贸bujecie stworzy wasny design na 99% skoczycie z czym dziwnym czego u偶ytkownicy nie chc u偶ywa. Jak tylko mo偶ecie kradnijcie designy i dostosowujcie do swoich potrzeb, u偶ytkownicy chc u偶ywa stron, kt贸re ju偶 znaj i nie da siesprawi by nie znali waszej stronjeli wyglda tak samo jak instagram 

Poza tym, nie pisz wasnych komponent贸w jeli nie masz BARDZO dobrego powodu, te z shadcna sbardzo adne i jak tylko mo偶esz u偶ywaj ich 1:1, wtedy na pewno nie zbdzisz.

- Jak chcesz wiedziewicej na ten temat zapraszam do poczytania Refactoring UI, ksi偶ka tw贸rc贸w tailwinda, poradnik o designie dla programist贸w (wymagany dostp do dysku)
  [https://drive.google.com/file/d/1zbsgxcK-xREkmFV7D6Z1lHZwOn4k04w-/view?usp=drive_link](https://drive.google.com/file/d/1zbsgxcK-xREkmFV7D6Z1lHZwOn4k04w-/view?usp=drive_link)

## Pobieranie danych z API

Tutaj mamy dwie cie偶ki:

1. React Server Components

   React Server Components (RSC) to domylne podejcie w Next.js 14+. Dziki nim dane s pobierane po stronie serwera, co eliminuje konieczno zarzdzania stanami adowania i zapewnia szybsze adowanie stron. Zaletami jest automatyczne renderowanie danych na serwerze, brak koniecznoci zarzdzania stanami adowania i s proste w u偶yciu.

    ```jsx {5-6}
    // app/products/page.tsx

    export default async function ProductsPage() {
      // Pobieranie danych z API po stronie serwera
      const data = await fetch('https://api.example.com/data');
      const products = await data.json();

      return (
        <div>
          <h1>Produkty</h1>
          <ul>
            {products.map((product) => (
              <li key={product.id}>
                {product.name} - {product.price} PLN
              </li>
            ))}
          </ul>
        </div>
      );
    }
    ```

2. Tanstack Query

   Tego u偶ywamy gdy chcemy mie wiksz kontrol nad tym co sidzieje w naszej aplikacji, potrzebujemy odwie偶aczsto dane albo na przykad mamy jak skomplikowan logik po stronie klienta (typu u偶ytkownik najpierw wybiera jak zakadk i dopiero wtedy pobieramy coz api albo jakikolwiek case z bardziej zaawansowanym filtrowaniem)

    <Tabs>
      <TabItem label="Zewntrzne API">
        ```jsx {2, 10-12}
        // app/products/page.tsx
        "use client"

        import { useQuery } from '@tanstack/react-query';

        export default function ProductsList() {
          const { data: products, isLoading, error, refetch } = useQuery({
            queryKey: ['products'],
            queryFn: async () => {
              const data = await fetch('https://api.example.com/data');
              const products = await data.json();
              return products
            },
          })

          if (isLoading) return <p>adowanie danych...</p>;
          if (error) return <p>Wystpi bd podczas pobierania danych.</p>;

          return (
            <ul>
              {products.map((product) => (
                <li key={product.id}>
                  {product.name} - {product.price} PLN
                </li>
              ))}
            </ul>
          );
        }
        ```
      </TabItem>
      <TabItem label="Server Actions (NextJS)">
        ```ts {2, 11}
        // actions/products.ts
        "use server"

        import { db } from '@/lib/db';
        /** 
        * PAMITAJCIE, 偶e tego typu akcje serwerowe s automatycznie generowanymi
        * endpointami API, wic ka偶dy mo偶e przy odrobinie umiejtnoci wykona swoje rzdanie do tej funkcji.
        * Trzeba zawsze zabezpieczy tak funkcj, jeli robimy rzeczy tylko dla zalogowanych u偶ytkownik贸w, np zmiana nazwy.
        */
        export async function fetchProducts() {
          return await db.products.findMany(); // Przykad z baz danych
        }
        ```

        ```jsx {2, 10}
        // app/products/page.tsx
        "use client"

        import { useQuery } from '@tanstack/react-query';
        import { fetchProducts } from '@/actions/products.ts';

        export default function ProductsList() {
          const { data: products, isLoading, error, refetch } = useQuery({
            queryKey: ['products'],
            queryFn: fetchProducts,
          })

          if (isLoading) return <p>adowanie danych...</p>;
          if (error) return <p>Wystpi bd podczas pobierania danych.</p>;

          return (
            <ul>
              {products.map((product) => (
                <li key={product.id}>
                  {product.name} - {product.price} PLN
                </li>
              ))}
            </ul>
          );
        }
        ```
      </TabItem>
    </Tabs>

    


Do pobierania danych te偶 potrzeba klienta API i tutaj mam zachcam do korzystania z natywnego `fetch` , a za u偶ywanie `axios`a bez powodu bd ucina pensje, jest bardzo mao powod贸w do u偶ywania axiosa w 2024 roku.

## Wysyanie danych do API

Tutaj jestem opinionated i wedug mnie jedynym susznym wyborem jest Tanstack Query i jego mutacje, nie pr贸bujcie tego robi inaczej, bo bdziecie sobie plu w brod (albo ja wam)

## Zarzdzanie stanem

Do globalnego stanu u偶ywamy [Jotai](https://jotai.org/), a do lokalnego useState/useReducer jak serio to jest coskomplikowanego

Nigdy Context API, chyba, 偶e macie BARDZO dobry pow贸d

## Formularze

Zapraszam do dokumentacji shadcna, tam wikszo jest dobrze opisana:

[https://ui.shadcn.com/docs/components/form](https://ui.shadcn.com/docs/components/form)

## Autentykacja

Nie mielimy jeszcze za du偶o projekt贸w, kt贸re by wymagay autentykacji, ale tutaj raczej zalecam i w klasyk i klepn to w [AuthJS](https://authjs.dev/). Jest to rozwijany od lat produkt, kt贸ry mo偶na 
w atwy spos贸b zintegrowa z projektem w NextJS. Zawiera du偶y funkcji, takich jak logowanie OAuth2 czy magicznymi linkami, sesje bazujce na bazie danych lub tokenach JWT czy automatyczn ochron przed CSRF.
Ma dobrze rozwinit spoeczno i dokumentacj oraz mas tutoriali na YouTubie.

Dodatkowo w ramach ciekawostki podrzucam Wam projekt dziaajcy pod nazw [BetterAuth](https://www.better-auth.com/). 
Jest to stosunkowo nowy projekt, kt贸ry w wersj stabiln wszed w listopadzie 2024 roku, aczkolwiek jest dobrze przemylany i aktywnie rozwijany.
Zalety tego projektu to midzy innymi, jeszcze atwiejsza instalacja ni偶 AuthJS czy rozwizanie pluginowe, np. jeli potrzebujecie u偶y Passkeys to dodajecie taki plugin do configu.
Do tego bardzo prosta dokumentacja. Polecam si zabawi.

Jeli robicie to DIY, to pewnie bdziecie musieli sobie odpowiedzie na pytanie gdzie trzyma tokeny i tutaj s dwie opcje:

- LocalStorage - protsza opcja, ale mniej bezpieczna i bardziej podatna na ataki XSS
- Cookies HttpOnly - bardziej bezpieczna opcja, ale trudniejsza w implementacji, 藕le zaimplementowane mo偶e prowadzi do atak贸w CSRF

Na potrzeby Solvro cokolwiek wybierzecie bdzie dobrze, a jeli kogo temat bardziej interesuje to tutaj mo偶na sobie poczyta:

- https://tkacz.pro/how-to-securely-store-jwt-tokens
- https://stackoverflow.com/questions/27067251/where-to-store-jwt-in-browser-how-to-protect-against-csrf

## Landing page

Jeli jeszcze raz ktozmarnuje czas na robienie wasnego landing pagea to go udusz, tutaj macie dwie templatki i prosz z nich zrzyna:

- [https://shadcn-landing-page.vercel.app](https://shadcn-landing-page.vercel.app/)
- [https://shadcn-landing-page-livid.vercel.app](https://shadcn-landing-page-livid.vercel.app/)

## Analityka

Do analityki mamy postawione [Umami](https://umami.is/) na [https://analytics.solvro.pl](https://analytics.solvro.pl), jak chcecie dostp to uderzajcie do Zarzdu.

## WYSIWYG

Strasznie nie lubitego tematu, bo tu jest milion wybor贸w i milion + 1 zych, obecnie rekomenduje:

[https://shadcn-minimal-tiptap.vercel.app/](https://shadcn-minimal-tiptap.vercel.app/)

## Tabelki

Do tworzenia bardziej zaawansowanych tabelek polecam [https://tanstack.com/table/latest](https://tanstack.com/table/latest). Jest do skomplikowany i ma wysoki pr贸g wejcia, ale pozwoli wam na wszystko co sobie wymylicie.

Jako przykad polecam DataTable z shadcn'a:
[https://ui.shadcn.com/docs/components/data-table](https://ui.shadcn.com/docs/components/data-table)

Jeli tabelka ma wicej ni偶 1000 wierszy to jest moment, 偶eby przenie logik filtrowania, paginacji i sortowania na backend, frontend przy takich ilociach powoli mo偶e zaczzamula. Przy 10k+ iloci wierszy to jest must-have.

## Deployment

Tutaj zapraszam do korzystania z naszego coolifya pod adresem [https://devops.solvro.pl/](https://devops.solvro.pl/), jak kto chce dostpy to pisa do Zarzdu, raczej ka偶dy dostaje 

## a11y

Za wsadzanie linka w przycisk bdkara tygodniow chost, to nie jest poprawny html, sam react krzyczy, 偶e nie mo偶na tak robi i czytniki ekran贸w sipopierdol jak spr贸buj to przeczyta

Jak zrobi Link, kt贸ry wyglda jak przycisk: [https://ui.shadcn.com/docs/components/button#as-child](https://ui.shadcn.com/docs/components/button#as-child)
